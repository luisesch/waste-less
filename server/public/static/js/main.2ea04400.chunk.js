(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e){e.exports=[{id:"1",description:"coffee to go",popup:"buy a coffee and bring your own cup",points:5,category:"To go",photo:"https://treadingmyownpath.com/wp-content/uploads/2017/11/Cupit-Kahla-Porcelain-Reusable-Coffee-Cup-550x389.jpg"},{id:"2",description:"bee wrap/packaging",popup:"plastic free alternative to wrap your food for reuse",points:15,category:"Kitchen",photo:"https://cdn.shopify.com/s/files/1/1950/5911/products/ABEEGO-main_grande.jpg?v=1536223068"},{id:"3",description:"dishwasher",points:20,category:"Cleaning",photo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWwk7vR_oKFeweKC-Xd-cYQtEbzTjmiuY9mkrVBnfHIp1MW71agg"},{id:"4",description:"own bag",points:5,category:"Shopping",photo:"https://www.preis.de/news/wp-content/uploads/2018/02/zerowaste-beitrag-740x493.jpeg"},{id:"5",description:"Buy food at a market",popup:"",points:5,category:"Food",photo:"https://einbisschengruener.files.wordpress.com/2017/01/de-eemstuin.jpg?w=750&h=498"},{id:"6",description:"Wrap your food",popup:"in plastic-free materials",points:5,category:"Food",photo:"https://nonagon.style/wp-content/uploads/2017/11/3-nonagon-style-zero-waste-kitchen-eco-friendly.jpg"},{id:"7",description:"Bring a bread bag",popup:"",points:5,category:"Shopping",photo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLcnupoK_wL6RuC0E-mzHZeDf2GakqVJqoMhheilV0rG7b9vja3Q"},{id:"8",description:"Cleaning",popup:"Buy plastic-free, compostable (wooden) brushes to use in the kitchen for cleaning and dishwashing, A Plastic-Free Sink is All-Natural and Non-Toxic",points:5,category:"Kitchen",photo:"https://www.toastenstein.com/wp-content/uploads/2018/07/zerowaste_toastenstein_sp%C3%BClb%C3%BCrste_schwamm-1024x674.jpg"},{id:"9",description:"Kitchen roll",popup:"Use towels/cloths instead of kitchen roll",points:5,category:"Kitchen",photo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQD7ZeBLoyQJobZzLEULpoxV19GxNuiPZtgRURDQI4zTYz4KLWI-g"},{id:"10",description:"Grocery shopping",popup:"ry grocery shopping without buying packaged food",points:5,category:"Shopping",photo:"https://www.blattgruen.blog/wp-content/uploads/2016/10/hg4.jpg"},{id:"11",description:"Avoid plastic bags",popup:"",points:5,category:"Shopping",photo:"https://helloyok.com/wp-content/uploads/2018/09/yok-no-plastic-bags-fruit.jpg"},{id:"12",description:"shampoo and shower gel",popup:"avoid shampoo in a plastic bottle, use a hair soap or mix your own shampoo with naturals ingredients",points:10,category:"Bathroom",photo:"http://freemindedfolks-blog.com/wp-content/uploads/2018/05/zerowaster-6253.jpg"},{id:"13",description:"Picknick/Eat outside",popup:"avoid plastic spoons, knifes, forks, etc., if you eat outside or take to go",points:10,category:"To Go",photo:"https://i.etsystatic.com/5879624/r/il/fd822b/1632989875/il_794xN.1632989875_98rc.jpg"},{id:"14",description:"Gift paper",popup:"",points:10,category:"Other",photo:"http://trashisfortossers.com/wp-content/uploads/2017/11/zero-waste-gift-guide-by-price-featured-image.jpg"}]},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},40:function(e,t,a){e.exports=a(78)},46:function(e,t,a){},47:function(e,t,a){},69:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),c=(a(46),a(2)),o=a(3),i=a(5),u=a(4),m=a(6),h=(a(10),a(47),a(84)),g=a(80),d=a(81),p=a(14),f=a.n(p),b=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a){return t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data}).catch(function(e){return console.log(e)})};var a=f.a.create({baseURL:"https://waste-less.herokuapp.com/api",withCredentials:!0});this.service=a},v=(a(33),a(15)),E=a(79),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.props.signup(t,n)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.state={username:"",password:"",message:""},a.service=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{className:"fontForm"},"Signup"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},className:"form-control",placeholder:"Username"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"Password"})),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"I accept the terms of use and privacy statement"," ")),r.a.createElement("button",{type:"submit",className:"btn btn-primary",value:"Signup"},"Submit")),r.a.createElement("div",{className:"message"},r.a.createElement("p",null,this.state.message)),r.a.createElement("p",null,"Already have an account?",r.a.createElement(E.a,{to:"/login"}," Login")))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).login=function(e,t){a.service.login(e,t).then(function(e){a.props.getUser(e)}).catch(function(e){return console.log(e)})},a.signup=function(e,t){a.service.signup(e,t).then(function(e){e.message?a.setState({message:e.message}):(a.setState({username:"",password:"",message:""}),a.props.getUser(e),a.props.history.push("/welcome"))})},a.service=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBar col-xs-12 col-md-7 pt-5"},r.a.createElement("h1",{className:"header"},"WASTE-LESS"),r.a.createElement("h4",null,"There is no plan(et) B")),r.a.createElement("div",{className:"rightBar col-xs-12 col-md-5 pt-5 px-5"},r.a.createElement(y,{signup:this.signup}))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.props.login(t,n)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.state={username:"",password:"",message:""},a.service=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{className:"fontForm"},"Login with your account"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},className:"form-control","aria-describedby":"emailHelp",placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"Password"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",value:"Login"},"Submit"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("p",null,"Don't have an account yet? Sign up",r.a.createElement(E.a,{to:"/"}," here")))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).login=function(e,t){a.service.login(e,t).then(function(e){a.props.getUser(e),a.props.history.push("/myleague")}).catch(function(e){return console.log(e)})},a.signup=function(e,t){a.service.signup(e,t).then(function(e){e.message?a.setState({message:e.message}):(a.setState({username:"",password:"",message:""}),a.props.getUser(e),a.props.history.push("/welcome"))}).catch(function(e){return console.log(e)})},a.service=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBar col-xs-12 col-md-7 pt-5"},r.a.createElement("h1",{className:"header"},"WASTE-LESS"),r.a.createElement("h4",null,"There is no plan(et) B")),r.a.createElement("div",{className:"rightBar col-xs-12 col-md-5 pt-5 px-5"},r.a.createElement(N,{login:this.login}))))}}]),t}(n.Component),j=a(36),k=(a(69),function e(){var t=this;Object(c.a)(this,e),this.create=function(e,a,n,r){var s=new FormData;return s.append("picture",r),s.append("name",e),s.append("administrator",a),s.append("members",JSON.stringify(n)),t.service.post("/leagues",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getLeague=function(e){return t.service.get("/leagues/"+e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.enterLeague=function(e,a){return t.service.put("leagues/"+a+"/enterLeague/"+e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.deleteMember=function(e,a){return t.service.post("/deleteMember",{leagueId:e,memberId:a}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.addMember=function(e,a){return t.service.post("/addMember",{leagueId:e,userId:a}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getMembers=function(e){return t.service.get("/leagues/"+e+"/members").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getExMembers=function(e){return t.service.get("/leagues/"+e+"/exmembers").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.startLeague=function(e){return t.service.put("/leagues/"+e+"/start").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.endLeague=function(e){return t.service.put("/leagues/"+e+"/end").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getArchive=function(e){return t.service.get("/archive/"+e).then(function(e){return e.data}).catch(function(e){return console.log(e)})};var a=f.a.create({baseURL:"https://waste-less.herokuapp.com/api",withCredentials:!0});this.service=a}),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).logoutUser=function(){a.service.logout().then(function(){a.setState({loggedInUser:null}),a.props.getUser(null)})},a.state={loggedInUser:null},a.service=new b,a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(j.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement("nav",{className:"navbar navbar-light bg-light navbar-fixed-top"},r.a.createElement(E.a,{to:"/myleague",className:"navbar-brand"},"Home"),r.a.createElement("form",{className:"form-inline"},r.a.createElement(E.a,{to:"/tasks",className:"navbar-brand"},"Tasks"),r.a.createElement(E.a,{to:"/myleague",className:"navbar-brand"},"My league"),r.a.createElement(E.a,{to:"/profile",className:"navbar-brand"},"Profile"),r.a.createElement("button",{onClick:function(){return e.logoutUser()},type:"button",className:"btn btn-outline-dark"},"Logout"))):r.a.createElement("nav",{className:"navbar navbar-light bg-light justify-content-between navbar-fixed-top"},r.a.createElement(E.a,{to:"/",className:"navbar-brand"},"Home"),r.a.createElement("form",{className:"form-inline"},r.a.createElement(E.a,{to:"/login",className:"navbar-brand",style:{textDecoration:"none"}},"Login"),r.a.createElement(E.a,{to:"/",className:"navbar-brand",style:{textDecoration:"none"}},"Signup")))}}]),t}(n.Component),U=a(39),x=a(83),I=function(e){var t=e.component,a=e.user,n=Object(U.a)(e,["component","user"]);return r.a.createElement(g.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,{loggedInUser:a})):r.a.createElement(x.a,{to:{pathname:"/",state:{from:e.location}}})}}))},C=a(24),L=a(17),D=a.n(L),T=a(25),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){t.preventDefault();var a=t.target.value;e.props.searchUsers(a)},e.state={query:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"control"},r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"input search-bar form-control",name:"query",placeholder:"Add members",value:this.state.name})))}}]),t}(n.Component),M=function e(){var t=this;Object(c.a)(this,e),this.showAll=function(){return t.service.get("/users").then(function(e){return e.data}).catch(function(e){return console.log(e)})};var a=f.a.create({baseURL:"https://waste-less.herokuapp.com/api",withCredentials:!0});this.service=a},A=(a(73),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).searchUserHandler=function(e){if(e.length<1)a.setState({filteredUsers:[]});else{var t=a.state.users.filter(function(e){return!e.league.hasOwnProperty("info")}).filter(function(t){var a=t.username.toLowerCase(),n=e.toLowerCase();return a.includes(n)});a.setState({filteredUsers:t})}},a.addUser=function(){var e=Object(T.a)(D.a.mark(function e(t){var n,r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,r=a.state.league._id,e.next=4,a.leagueService.addMember(r,n);case 4:a.leagueService.getMembers(r).then(function(e){return a.setState({members:e})}).catch(function(e){return console.log(e)}),a.userService.showAll().then(function(e){for(var t=e.length-1;t>=0;t--)e[t].username===a.state.loggedInUser.username&&e.splice(t,1);a.setState({users:e,filteredUsers:[]})}).catch(function(e){return console.log(e)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.deleteMember=function(){var e=Object(T.a)(D.a.mark(function e(t){var n,r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.league._id,r=t.target.value,e.next=4,a.leagueService.deleteMember(n,r);case 4:a.leagueService.getMembers(n).then(function(e){return a.setState({members:e})}).catch(function(e){return console.log(e)}),a.userService.showAll().then(function(e){for(var t=e.length-1;t>=0;t--)e[t].username===a.state.loggedInUser.username&&e.splice(t,1);a.setState({users:e,filteredUsers:[]})}).catch(function(e){return console.log(e)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.startLeague=Object(T.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.league._id,e.next=3,a.leagueService.startLeague(a.state.league._id);case 3:a.leagueService.getLeague(t).then(function(e){a.setState({league:e}),a.props.history.push("/myleague")}).catch(function(e){return console.log(e)});case 4:case"end":return e.stop()}},e)})),a.state={loggedInUser:a.props.userInSession,league:a.props.league,filteredUsers:[],users:null,selectedMember:[],members:[]},a.leagueService=new k,a.userService=new M,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.leagueService.getMembers(this.state.loggedInUser.league.info).then(function(t){return e.setState({members:t})}).catch(function(e){return console.log(e)}),this.userService.showAll().then(function(t){for(var a=t.length-1;a>=0;a--)t[a].username===e.state.loggedInUser.username&&t.splice(a,1);e.setState({users:t})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return 0===Object.entries(this.state.league).length?r.a.createElement("p",null,"Loading"):r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"createLeague card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("h2",{className:"card-title font-weight-light"},"Your league"),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-11 text-left"},r.a.createElement("h3",{className:"font-weight-light"},"Name: ",this.state.league.name),r.a.createElement("h5",{className:"font-weight-light"}," Admin: ",this.state.league.administrator.username),r.a.createElement("br",null),this.state.league.administrator._id===this.state.loggedInUser._id?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h3",{className:"font-weight-light"},"Members")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("div",null,this.state.members.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("th",{scope:"row"},r.a.createElement("img",{className:"profilePic rounded",src:t.photo,alt:"default"})),r.a.createElement("td",{className:"text-centered"},t.username),r.a.createElement("td",null,"(",t.league.confirmed?"confirmed":"waiting",")"),r.a.createElement("td",null,t._id!==e.state.loggedInUser._id&&r.a.createElement("button",{name:"deleteMember",className:"btn btn-light w-100",type:"submit",value:t._id,onClick:e.deleteMember},"Delete")))}))))):r.a.createElement("div",null,"Admin:",this.state.league.administrator.username,this.state.members.map(function(e,t){return r.a.createElement("div",{key:t},e.username)})),this.state.league.administrator._id===this.state.loggedInUser._id?r.a.createElement("div",null,r.a.createElement(_,{searchUsers:this.searchUserHandler}),this.state.filteredUsers.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"btn btn-light w-100",htmlFor:"user",value:t._id,onClick:e.addUser},t.username),r.a.createElement("br",null))}),this.state.members.every(function(e){return!0===e.league.confirmed})?r.a.createElement("button",{onClick:this.startLeague,className:"btn btn-primary mt-3"},"Let the games begin"):r.a.createElement("button",{className:"btn btn-primary mt-3"},"Waiting for all members to confirm")):null))),r.a.createElement("div",{className:"col-md-7 left"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"https://consciousbychloe.imgix.net/2018/06/consciousbychloe-5-Rs-zero-waste-ashley-hardy-vase-1.jpg",alt:""})))),r.a.createElement("div",{className:"card-footer text-muted"}," There is no planet B "))}}]),t}(n.Component)),B=Object(d.a)(A),F=(a(34),a(12)),H=a.n(F),W=function e(){var t=this;Object(c.a)(this,e),this.taskCompleted=function(e,a,n){return t.service.post("/user/completeTask",{newScore:e,user:a,task:n}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getCompletedTasksLeague=function(e){return t.service.get("/tasks/"+e).then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e)})},this.getCompletedTasksUser=function(e){return t.service.get("/tasks/user/"+e).then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e)})};var a=f.a.create({baseURL:"https://waste-less.herokuapp.com/api",withCredentials:!0});this.service=a},P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={league:a.props.league,firstThree:[],completedTasks:[]},a.authService=new b,a.leagueService=new k,a.taskService=new W,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.leagueService.getMembers(this.props.league._id).then(function(t){var a,n=Object(C.a)(t);n.sort(function(e,t){return t.score-e.score}),a=n.slice(0,2),e.setState({firstThree:a})}).catch(function(e){return console.log(e)}),this.taskService.getCompletedTasksLeague(this.props.league._id).then(function(t){var a=[];t.forEach(function(e){a.push(e)}),a.reverse(),e.setState({completedTasks:a})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return 0===this.state.firstThree.length?r.a.createElement("p",null,"Loading"):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row align-items-center my-5"},r.a.createElement("div",{className:"col-lg-7 col-xs-12"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:this.state.league.photo,alt:""})),r.a.createElement("div",{className:"col-lg-5 col-xs-12 px-0"},r.a.createElement("h5",{className:"font-weight-bold text-right pr-3"},"Score ",this.props.userInSession.score),r.a.createElement("h1",{className:"font-weight-light"},r.a.createElement("br",null),"Dashboard of ",this.props.league.name),r.a.createElement("br",null),r.a.createElement("h5",null,"-Best of the League-"),r.a.createElement("div",{className:"rightBox"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Score"))),r.a.createElement("tbody",null,this.state.firstThree.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.score))}),r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("td",null,r.a.createElement(E.a,{to:"/myleague/highscore"},"See all")),r.a.createElement("td",null))))))),r.a.createElement("div",{className:"middleBlock card text-white my-5 py-4 text-center"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"text m-0"},r.a.createElement("h3",null,"Your league ends ",H()(this.props.endDate,"L").fromNow(),","," ",this.props.userInSession.username),r.a.createElement("h5",null,"What else can you do to rise your score today?"),r.a.createElement(E.a,{to:"/tasks"},"Browse tasks")))),r.a.createElement("br",null),r.a.createElement("p",{className:"m-0"},"See the latest tasks of your team"),r.a.createElement("div",{className:"row"},this.state.completedTasks.map(function(e,t){if(t<=2)return r.a.createElement("div",{className:"card text-center col-xs-12 col-lg-3 mb-5 mt-3",key:t},r.a.createElement("div",{className:"card-body font-weight-light"},r.a.createElement("h5",{className:"card-title"},r.a.createElement("strong",null,e.user.username)," collected ",r.a.createElement("br",null),r.a.createElement("strong",null,e.task.points)," points for task:",r.a.createElement("br",null),e.task.description),r.a.createElement("img",{src:e.task.photo,className:"card-img-top img-thumbnail",alt:"default"})),r.a.createElement("div",{className:"card-footer text-muted"},r.a.createElement("small",null,H()(e.created_at).startOf("hour").fromNow())))})))}}]),t}(n.Component),R=Object(d.a)(P),z=(a(35),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).enterLeague=function(){a.leagueService.enterLeague(a.state.loggedInUser._id,a.state.loggedInUser.league.info).then(function(e){a.setState({loggedInUser:e}),a.props.history.push("/myleague")}).catch(function(e){return console.log(e)})},a.declineLeague=function(){var e=a.state.loggedInUser.league.info,t=a.state.loggedInUser._id;a.leagueService.deleteMember(e,t).then(function(e){a.setState({loggedInUser:e}),a.props.history.push("/myleague")}).catch(function(e){return console.log(e)})},a.state={loggedInUser:a.props.userInSession,league:a.props.league},a.authService=new b,a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"You have been invited to join the league",r.a.createElement("strong",null," ",this.state.league.name),"."),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.enterLeague},"Join league"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.declineLeague},"I don't want to join this league."))}}]),t}(n.Component)),q=Object(d.a)(z),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).leagueOver=function(){var e=a.state.league._id;(H()().format("L")===a.state.endDate||H()(a.state.endDate,"L").fromNow().indexOf("ago")>=0)&&"active"===a.state.league.status&&a.leagueService.endLeague(e).then(function(e){a.setState({league:e})}).catch(function(e){return console.log(e)})},a.state={loggedInUser:{},members:[],league:{},endDate:"",firstThree:[]},a.authService=new b,a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){if(e.setState({loggedInUser:t}),e.state.loggedInUser.league.hasOwnProperty("info")){var a=e.state.loggedInUser.league.info;e.leagueService.getLeague(a).then(function(t){e.setState({league:t})}).catch(function(e){return console.log(e)}),e.leagueService.getMembers(a).then(function(t){var a,n=Object(C.a)(t);n.sort(function(e,t){return t.score-e.score}),a=n.slice(0,2),e.setState({members:t,firstThree:a})}).catch(function(e){return console.log(e)})}else e.setState({league:!1})})}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.endDate.length<=0&&"active"===this.state.league.status){var t=this.state.loggedInUser.league.info;this.leagueService.getLeague(t).then(function(t){e.setState({league:t,endDate:H()(t.startDate,"L").add(30,"days").calendar()})}).catch(function(e){return console.log(e)})}}},{key:"render",value:function(){return null===this.state.league?r.a.createElement("p",null,"Loading"):this.state.league&&0!==Object.entries(this.state.league).length?"completed"===this.state.league.status?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"createLeague card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 left"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"https://ecowarriorprincess.net/wp-content/uploads/2018/04/We-Cant-Recycle-Our-Way-to-Zero-Waste.jpg",alt:""})),r.a.createElement("div",{className:"col-md-5 right"},r.a.createElement("h1",{className:"card-title font-weight-light"},"League ",this.state.league.name," has been completed - congratulations!"),r.a.createElement("br",null),r.a.createElement("p",null,"Check out the results"," ",r.a.createElement(E.a,{to:"/archive/".concat(this.state.league._id)},"here"))," ",r.a.createElement("br",null)," or ",r.a.createElement("br",null),r.a.createElement("p",null,"Create a new league ",r.a.createElement(E.a,{to:"/newleague"},"here"))))),r.a.createElement("div",{className:"card-footer text-muted"}," Wanna try again? ")):this.state.loggedInUser.league.confirmed?"waiting"===this.state.league.status?r.a.createElement(B,{userInSession:this.state.loggedInUser,league:this.state.league}):(this.leagueOver(),r.a.createElement(R,{endDate:this.state.endDate,userInSession:this.state.loggedInUser,league:this.state.league})):r.a.createElement(q,{userInSession:this.state.loggedInUser,league:this.state.league}):r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"createLeague card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 left"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"https://www.longevitylive.com/wp-content/uploads/2017/09/art-close-up-ecology-886521.jpg",alt:""})),r.a.createElement("div",{className:"col-md-5 right"},r.a.createElement("h1",{className:"card-title font-weight-light"},"You aren't currently member of any league."),r.a.createElement("br",null),r.a.createElement(E.a,{to:"/newleague"},"Create new league")))),r.a.createElement("div",{className:"card-footer text-muted"},"Let the games begin! "))}}]),t}(n.Component),J=Object(d.a)(G),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:{}},a.authService=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"createLeague card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 left"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"http://trashisfortossers.com/wp-content/uploads/2017/10/beginners-guide-to-zero-waste-featured-image.jpg",alt:""})),r.a.createElement("div",{className:"col-md-5 right"},r.a.createElement("h1",{className:"card-title font-weight-light"},"Thank you for signing up, ",this.state.loggedInUser.username),r.a.createElement("br",null),r.a.createElement(E.a,{to:"/"},"Check out your dashboard")))),r.a.createElement("div",{className:"card-footer text-muted"}," There is no planet B "))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:{},league:{},members:[]},a.authService=new b,a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(e){return console.log(e)}),this.leagueService.getLeague(this.props.id).then(function(t){e.setState({league:t})}).catch(function(e){return console.log(e)}),this.leagueService.getExMembers(this.props.id).then(function(t){e.setState({members:t})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return 0===Object.entries(this.state.league).length?r.a.createElement("p",null,"Loading."):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row p-3"},r.a.createElement("div",{className:"col-md-4 col-xs-12 text-left"},r.a.createElement("h3",null,this.state.league.name),r.a.createElement("p",null,"Ended on: ",this.state.league.endDate)),r.a.createElement("div",{className:"col-md-8 col-xs-12"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Member"),r.a.createElement("th",{scope:"col"},"Score"))),r.a.createElement("tbody",null,this.state.members.map(function(t,a){return r.a.createElement("tr",{key:a,className:t._id===e.state.loggedInUser._id&&"table-info"},r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.score))}))))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:{},leagues:[]},a.authService=new b,a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState({loggedInUser:t}),e.leagueService.getArchive(e.state.loggedInUser._id).then(function(t){t.completedLeagues.reverse(),e.setState({leagues:t.completedLeagues})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.leagues.length<=0?r.a.createElement("p",null,"Loading"):r.a.createElement("div",{class:"container-fluid"},r.a.createElement("h2",null,"Completed leagues"),r.a.createElement("div",{className:"row p-3"},this.state.leagues.map(function(e,t){return r.a.createElement("div",{key:t,className:"col-3"},r.a.createElement(E.a,{to:"/archive/".concat(e.info._id)},r.a.createElement("button",{className:"btn btn-outline-info btn-lg w-100"},e.info.name)))})),this.props.match.params.id&&r.a.createElement(K,{id:this.props.match.params.id}))}}]),t}(n.Component),Z=Object(d.a)(Q),V=a(18),X=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){t.preventDefault();var a=t.target.value;e.props.searchTasks(a)},e.state={query:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"field"},r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"input search-bar",name:"query",placeholder:"Find tasks",value:this.state.name}))}}]),t}(n.Component),$=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){t.preventDefault();var a=t.target.value;e.props.searchCategory(a)},e.state={query:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"field"},r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"input search-bar",name:"query",placeholder:"Find task by Category",value:this.state.category}))}}]),t}(n.Component),ee=a(38),te=(a(75),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).searchNameHandler=function(t){var a=e.state.tasks.filter(function(e){var a=e.description.toLowerCase(),n=t;return a.includes(n)});e.setState({filtered:a})},e.searchCategoryHandler=function(t){var a=e.state.tasks.filter(function(e){var a=e.category.toLowerCase(),n=t.toLowerCase();return a.includes(n)});e.setState({filtered:a})},e.scoreHandler=function(t){for(var a=t.target.value,n={},r=0;r<V.length;r++)V[r].id===a&&(n=JSON.stringify(V[r]));var s=Number(n.points);e.props.setScore(s,n)},e.state={tasks:V,filtered:V},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tasks container"},r.a.createElement("h1",null,"Tasks"),r.a.createElement(X,{searchTasks:this.searchNameHandler}),r.a.createElement($,{searchCategory:this.searchCategoryHandler}),r.a.createElement("div",{className:"row"},this.state.filtered.map(function(t,a){return r.a.createElement("div",{className:"card col-xs-12 col-md-3 mb-5 mt-3 mx-3",key:a},r.a.createElement("div",{className:"card-body font-weight-light"},r.a.createElement("img",{src:t.photo,className:"card-img-top img-thumbnail",alt:"default"}),r.a.createElement("br",null),r.a.createElement("h5",{className:"card-title"},t.description),r.a.createElement("button",{className:"points mx-2 btn btn-secondary",type:"submit",value:t.id,onClick:e.scoreHandler},t.points),r.a.createElement(ee.a,{trigger:r.a.createElement("button",{className:"btn btn-secondary",type:"button"},"info"),position:"right center"},r.a.createElement("div",null,t.popup)),r.a.createElement("br",null)," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"card-footer text-muted"},t.category))})))}}]),t}(n.Component)),ae=(a(76),f.a.create({baseURL:"/api",withCredentials:!0})),ne=function(e){if(e.response&&e.response.data)throw e.response.data.message;throw e},re=function(e,t){var a=new FormData;return a.append("picture",e),ae.post("/users/"+t+"/pictures",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(ne)},se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"picture"===n?a.setState({picture:e.target.files[0]}):a.setState(Object(v.a)({},n,r))},a.membersArr=[],a.selectUser=function(e){a.membersArr.push(e.target.value);for(var t=a.state.users,n=e.target.value,r=t.length-1;r>=0;r--)t[r].username===n&&t.splice(r,1);a.setState({members:a.membersArr,users:t,filteredUsers:[]})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.state.picture,r=a.state.loggedInUser._id,s=a.state.members;a.leagueService.create(t,r,s,n).then(function(e){a.setState({name:"",members:[]}),a.props.history.push("/myleague")}).catch(function(e){return console.log(e)})},a.searchUserHandler=function(e){if(e.length<1)a.setState({filteredUsers:[]});else{var t=a.state.users.filter(function(e){return!e.league.hasOwnProperty("info")}).filter(function(t){var a=t.username.toLowerCase(),n=e.toLowerCase();return a.includes(n)});a.setState({filteredUsers:t})}},a.state={loggedInUser:null,name:"",members:[],users:null,filteredUsers:[],picture:null},a.leagueService=new k,a.userService=new M,a.authService=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(e){return console.log(e)}),this.userService.showAll().then(function(t){for(var a=t.length-1;a>=0;a--)t[a].username===e.state.loggedInUser.username&&t.splice(a,1);e.setState({users:t})}).catch(function(e){return console.log(e)})}},{key:"handleChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"handleSubmit",value:function(e){e.preventDefault(),re(this.state.file,this.state.league._id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card container-fluid"},r.a.createElement("div",{className:"createLeague card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 left"},r.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"http://www.ecozine.com/sites/default/files/imagecache/article_page_large/homemade-deliciousness.net__0.jpg",alt:""})),r.a.createElement("div",{className:"col-md-5 right"},r.a.createElement("h1",{className:"card-title font-weight-light"},"Create new league"," "),r.a.createElement("br",null),r.a.createElement("div",{className:"field"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input form-control",type:"text",name:"name",onChange:this.handleChange,value:this.state.name,placeholder:"Name of the league"}),r.a.createElement("br",null)),this.state.members.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))}),r.a.createElement(_,{searchUsers:this.searchUserHandler}),r.a.createElement("div",{className:"form-check"},this.state.filteredUsers.map(function(t,a){return r.a.createElement("button",{key:a,onClick:e.selectUser,className:"form-control btn btn-light",name:"members",value:t.username,id:"user"},t.username)})),r.a.createElement("br",null),r.a.createElement("label",null,"Upload League Picture"),r.a.createElement("input",{type:"file",name:"picture",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"})))))),r.a.createElement("div",{className:"card-footer text-muted"},"Let the games begin! "))}}]),t}(n.Component),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={league:a.props.league,loggedInUser:a.props.loggedInUser,members:[],endDate:""},a.leagueService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.league._id;this.leagueService.getMembers(t).then(function(t){t.sort(function(e,t){return t.score-e.score}),e.setState({members:t,endDate:H()(e.state.league.startDate,"L").add(30,"days").calendar()})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.members.length<=0?r.a.createElement("p",null,"Loading"):r.a.createElement("div",null,r.a.createElement("h2",null,this.state.league.name),r.a.createElement("p",null,"Started on: ",this.state.league.startDate),r.a.createElement("p",null,"Ends ",H()(this.state.endDate,"L").fromNow()),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Rank"),r.a.createElement("th",{scope:"col"},"Member"),r.a.createElement("th",{scope:"col"},"Score"))),r.a.createElement("tbody",null,this.state.members.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.score))}))))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={league:{},members:[],loggedInUser:null},a.leagueService=new k,a.userService=new M,a.authService=new b,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){if(e.setState({loggedInUser:t}),e.state.loggedInUser.league.hasOwnProperty("info")){var a=e.state.loggedInUser.league.info;e.leagueService.getLeague(a).then(function(t){e.setState({league:t})}).catch(function(e){return console.log(e)}),e.leagueService.getMembers(a).then(function(t){return e.setState({members:t})}).catch(function(e){return console.log(e)}),e.userService.showAll().then(function(t){e.setState({users:t})})}else e.setState({league:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return null===this.state.loggedInUser?r.a.createElement("p",null,"Loading"):this.state.league&&0!==Object.entries(this.state.league).length&&"completed"!==this.state.league.status?this.state.loggedInUser.league.confirmed?"active"===this.state.league.status?r.a.createElement(le,{loggedInUser:this.state.loggedInUser,league:this.state.league,members:this.state.members}):void 0:r.a.createElement("p",null,"You have been invited to join the league",r.a.createElement("strong",null,this.state.league.name),".",r.a.createElement("br",null),r.a.createElement("button",{onClick:this.enterLeague},"Join league")):r.a.createElement("div",null,r.a.createElement("p",null,"You aren't currently member of any league."),r.a.createElement(E.a,{to:"/newleague"},"Create new league"))}}]),t}(n.Component),oe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Foot"},r.a.createElement("footer",{className:"page-footer font-small light-green pt-2"},r.a.createElement("div",{className:"container text-center text-md-left"},r.a.createElement("div",{className:"row text-center text-md-left mt-2 pb-2"},r.a.createElement("div",{className:"col-md-4 col-lg-4 col-xl-4 mx-auto mt-2 pr-5"},r.a.createElement("h6",{className:"text-uppercase mb-2 font-weight-bold"},"About"),r.a.createElement("p",null,"This website has been created by Janine and Luise as the second project of their part-time web-development bootcamp at ironhack in Berlin.")),r.a.createElement("div",{className:"col-md-4 col-lg-4 col-xl-4 mx-auto mt-2"},r.a.createElement("h6",{className:"text-uppercase mb-2 font-weight-bold"},"Contact"),r.a.createElement("p",null,"Ironhack, Berlin"),r.a.createElement("p",null,"waste-less.ironhack@gmail.com"))),r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("div",{className:"col-md-7 col-lg-8"},r.a.createElement("p",{className:"text-center text-md-left"},"\xa9 2018 Copyright:",r.a.createElement("strong",null," Luise & Janine \u2013 Ironhackers"))),r.a.createElement("div",{className:"col-md-5 col-lg-4 ml-lg-0"},r.a.createElement("div",{className:"text-center text-md-right"},r.a.createElement("ul",{className:"list-unstyled list-inline"},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{className:"btn-floating btn-sm rgba-white-slight mx-1",href:"/"},r.a.createElement("i",{className:"fab fa-facebook-f"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{className:"btn-floating btn-sm rgba-white-slight mx-1",href:"/"},r.a.createElement("i",{className:"fab fa-twitter"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{className:"btn-floating btn-sm rgba-white-slight mx-1",href:"/"},r.a.createElement("i",{className:"fab fa-google-plus-g"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{className:"btn-floating btn-sm rgba-white-slight mx-1",href:"/"},r.a.createElement("i",{className:"fab fa-linkedin-in"}))))))))))}}]),t}(n.Component),ie=(a(77),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:{},file:null,completedTasks:[]},a.authService=new b,a.taskService=new W,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"handleSubmit",value:function(e){e.preventDefault(),re(this.state.file,this.state.loggedInUser._id)}},{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState({loggedInUser:t}),e.taskService.getCompletedTasksUser(t._id).then(function(t){var a=[];t.forEach(function(e){a.push(e)}),a.reverse(),e.setState({completedTasks:a})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"profileContainer container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h3",{className:"my-4"},"Welcome to your profile, ",this.state.loggedInUser.username,r.a.createElement("br",null),r.a.createElement("small",null,"Have you been waste-less today?")),r.a.createElement("div",{className:"card mb-4"},r.a.createElement("img",{className:"card-img-top",src:this.state.loggedInUser.photo,alt:"default"}),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"file",onChange:function(t){return e.handleChange(t)}})," ",r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Save new profile picture")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"}," ",r.a.createElement("h4",null,"Motto:"),' "Es gibt viel, was du selbst tun kannst."'),r.a.createElement(E.a,{to:"#",className:"btn btn-primary"},"Edit Profile")),r.a.createElement("div",{className:"card-footer text-muted"},"Currently part of the league"," ",r.a.createElement(E.a,{to:"/",className:"card-link"},"Dashboard")))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("br",null),r.a.createElement("h5",{className:"font-weight-bold text-right pr-3"},"Score ",this.state.loggedInUser.score),r.a.createElement("div",{className:"card my-4"},r.a.createElement("h5",{className:"card-header"},"Invitation"),r.a.createElement("div",{className:"card-body"},'You are invited to join the league "..."',r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"mx-2 btn btn-secondary",type:"button"},"Confirm")))),r.a.createElement("div",{className:"card my-4"},r.a.createElement("h5",{className:"card-header"},"Search for new tasks"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search for..."}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},"Go!"))))))),r.a.createElement("h3",null,"Latest completed tasks"),r.a.createElement("div",{className:"row"},this.state.completedTasks.map(function(e,t){if(t<=2)return r.a.createElement("div",{className:"card text-center col-xs-12 col-lg-3 mb-5 mt-3",key:t},r.a.createElement("div",{className:"card-body font-weight-light"},r.a.createElement("h5",{className:"card-title"},r.a.createElement("strong",null,e.task.points)," points for task:",r.a.createElement("br",null),e.task.description),r.a.createElement("img",{src:e.task.photo,className:"card-img-top img-thumbnail",alt:"default"})),r.a.createElement("div",{className:"card-footer text-muted"},r.a.createElement("small",null,H()(e.created_at).startOf("hour").fromNow())))})))}}]),t}(n.Component)),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.raiseScore=function(e,t){var n=a.state.loggedInUser.score+e;a.taskService.taskCompleted(n,a.state.loggedInUser,t).then(function(e){a.setState({loggedInUser:e})}).catch(function(e){return console.log(e)})},a.state={loggedInUser:null},a.authService=new b,a.taskService=new W,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.authService.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?r.a.createElement("div",{className:"App"},r.a.createElement(O,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),r.a.createElement("div",{className:"fixfooter text-center"},r.a.createElement(h.a,null,r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/myleague",component:function(e){return r.a.createElement(J,e)}}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/welcome",component:Y}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/tasks",component:function(){return r.a.createElement(te,{setScore:e.raiseScore})}}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/newleague",component:function(t){return r.a.createElement(se,Object.assign({},t,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/myleague/highscore",component:function(t){return r.a.createElement(ce,{userInSession:e.state.loggedInUser,getUser:e.getTheUser})}}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/profile",component:ie}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/archive",component:Z}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/archive/:id",component:Z}))),r.a.createElement(oe,null)):r.a.createElement("div",{className:"App"},r.a.createElement(O,{userInSession:this.state.loggedInUser}),r.a.createElement(h.a,null,r.a.createElement(g.a,{user:this.state.loggedInUser,exact:!0,path:"/",component:function(t){return r.a.createElement(w,Object.assign({},t,{getUser:e.getTheUser}))}}),r.a.createElement(g.a,{user:this.state.loggedInUser,exact:!0,path:"/login",component:function(t){return r.a.createElement(S,Object.assign({},t,{getUser:e.getTheUser}))}}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/myleague"}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/newleague"}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/tasks"}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/profile"}),r.a.createElement(I,{user:this.state.loggedInUser,exact:!0,path:"/myleague/highscore"})),r.a.createElement(oe,null))}}]),t}(n.Component),me=Object(d.a)(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=a(82);l.a.render(r.a.createElement(he.a,null,r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.2ea04400.chunk.js.map